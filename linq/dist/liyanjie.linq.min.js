!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(((t="undefined"!=typeof globalThis?globalThis:t||self).liyanjie=t.liyanjie||{},t.liyanjie.linq={}))}(this,function(t){"use strict";var n=function(t,r){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,r){t.__proto__=r}:function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])}))(t,r)};function r(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=t}n(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}function o(t,r,e){if(e||2===arguments.length)for(var n,o=0,u=r.length;o<u;o++)!n&&o in r||((n=n||Array.prototype.slice.call(r,0,o))[o]=r[o]);return t.concat(n||Array.prototype.slice.call(r))}f._check=function(t){if(!t||!Array.isArray(t))throw new Error("Array parameter can not be null or undefined!")},f.new=function(t){return new f(t||[])},f.from=function(t){return new f(t||[])},f.prototype.all=function(t){return this.every(t)},f.prototype.every=function(t){return!0===this.source.every(t)},f.prototype.any=function(t){return this.some(t)},f.prototype.some=function(t){return t?!0===this.source.some(t):0<this.source.length},f.prototype.append=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return f._check(r),(t=this.source).push.apply(t,r),this},f.prototype.average=function(t){return this.sum(t)/this.source.length},f.prototype.concat=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return f._check(r),new f((t=this.source).concat.apply(t,r))},f.prototype.contains=function(r,e){return e?!0===this.source.some(function(t){return e(t,r)}):-1<this.source.indexOf(r)},f.prototype.count=function(t){return(t?this.source.filter(t):this.source).length},f.prototype.defaultIfEmpty=function(t){return this.isEmpty()?new f(t?[t]:[]):this},f.prototype.distinct=function(e){e=e||function(t,r){return t===r};var t=[];return this.source.forEach(function(r){return!1===t.some(function(t){return e(t,r)})&&t.push(r)}),new f(t)},f.prototype.elementAtOrDefault=function(t){return this.source.length>t?this.source[t]:void 0},f.empty=function(){return new f([])},f.prototype.except=function(t,e){f._check(t),e=e||function(t,r){return t===r};var n=[];return this.source.forEach(function(r){return!1===t.some(function(t){return e(t,r)})&&n.push(r)}),new f(n)},f.prototype.firstOrDefault=function(t){t=t?this.source.filter(t):this.source;return 0<t.length?t[0]:void 0},f.prototype.forEach=function(t){this.source.forEach(t)},f.prototype.groupBy=function(n,o){o=o||function(t,r){return t===r};var u=[];return this.source.forEach(function(t){var r=n(t),e=u.filter(function(t){return o(t.key,r)});0<e.length?e[0].source.push(t):u.push(new c({key:r,source:[t]}))}),new f(u)},f.prototype.groupJoin=function(n,o,u,i,c){f._check(n),c=c||function(t,r){return t===r};for(var s=[],h=this,t=0;t<this.source.length;t++)!function(t){var t=h.source[t],r=o(t),e=n.filter(function(t){return c(r,u(t))}),t=i(t,e,r);t&&s.push(t)}(t);return new f(s)},f.prototype.intersect=function(t,e){f._check(t),e=e||function(t,r){return t===r};var n=[];return this.source.forEach(function(r){return!0===t.some(function(t){return e(t,r)})&&n.push(r)}),new f(n)},f.prototype.isEmpty=function(){return 0===this.source.length},f.prototype.join=function(n,o,u,i,c){f._check(n),c=c||function(t,r){return t===r};for(var s=[],h=this,t=0;t<this.source.length;t++)!function(t){var t=h.source[t],r=o(t),e=n.filter(function(t){return c(r,u(t))}),e=0<e.length?e[0]:void 0,t=i(t,e,r);t&&s.push(t)}(t);return new f(s)},f.prototype.lastOrDefault=function(t){return t?this.source.filter(t):this.source,0<this.source.length?this.source[this.source.length-1]:void 0},f.prototype.max=function(e){return 0===this.source.length?0:e(this.source.sort(function(t,r){return e(r)-e(t)})[0])},f.prototype.min=function(e){return 0===this.source.length?0:e(this.source.sort(function(t,r){return e(t)-e(r)})[0])},f.prototype.orderBy=function(t,r,e){return this.__orderBy(t,!1,r,e)},f.prototype.orderByDescending=function(t,r,e){return this.__orderBy(t,!0,r,e)},f.prototype.__orderBy=function(n,t,r,o){o=o||function(t,r){return t===r};var u=[],i=[],e=(this.source.forEach(function(t){var r=n(t),e=(u.indexOf(r)<0&&u.push(r),i.filter(function(t){return o(t.key,r)}));0<e.length?e[0].source.push(t):i.push({key:r,source:[t]})}),u=r?u.sort(r):u.sort(),t&&(u=u.reverse()),[]);return u.forEach(function(r){return e.push(new c(i.filter(function(t){return o(r,t.key)})[0]))}),new y(e)},f.prototype.prepend=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return f._check(t),this.source=new(Array.bind.apply(Array,o(o([void 0],t,!1),this.source,!1))),this},f.range=function(t,r){for(var e=[],n=0;n<r;n++)e.push(t+n);return new h(e)},f.repeat=function(t,r){for(var e=[],n=0;n<r;n++)e.push(t);return new f(e)},f.prototype.reverse=function(){return new f((new(Array.bind.apply(Array,o([void 0],this.source,!1)))).reverse())},f.prototype.select=function(e){var n=[];return this.source.forEach(function(t,r){t=e(t,r);t&&n.push(t)}),new f(n)},f.prototype.selectMany=function(e){var n=[];return this.source.forEach(function(t,r){t=e(t,r);t&&n.push.apply(n,t)}),new f(n)},f.prototype.sequenceEqual=function(t,r){if(f._check(t),this.source.length!==t.length)return!1;r=r||function(t,r){return t===r};for(var e=!0,n=0;n<this.source.length;n++)if(!r(this.source[n],t.length>n?t[n]:void 0)){e=!1;break}return r=void 0,e},f.prototype.skip=function(e){var n=[];return this.source.forEach(function(t,r){return e<=r&&n.push(t)}),new f(n)},f.prototype.skipWhile=function(e){for(var n=[],t=!1,r=0;r<this.source.length;r++){var o=this.source[r];if(e(o,r)){if(t)break}else t=t||!0,n.push(o)}return this.source.forEach(function(t,r){return!e(t,r)&&n.push(t)}),new f(n)},f.prototype.sum=function(r){var e;return 0===this.source.length?0:(e=0,this.source.forEach(function(t){return e+=r(t)}),e)},f.prototype.take=function(e){var n=[];return this.source.forEach(function(t,r){return r<e&&n.push(t)}),new f(n)},f.prototype.takeWhile=function(t){for(var r=[],e=!1,n=0;n<this.source.length;n++){var o=this.source[n];if(t(o,n))e=e||!0,r.push(o);else if(e)break}return new f(r)},f.prototype.toArray=function(){return this.source},f.prototype.toDictionary=function(e,n){var o={};return this.source.forEach(function(t){var r=e(t);o[r]||(o[r]=n(t))}),o},f.prototype.toString=function(r,e){null==r&&(r=","),e=e||function(t){return t.toString()};var n="";return this.source.forEach(function(t){return n+=e(t)+r}),n.substring(0,n.length-r.length)},f.prototype.union=function(t,e){f._check(t),e=e||function(t,r){return t===r};var n=new(Array.bind.apply(Array,o([void 0],this.source,!1)));return t.forEach(function(r){return!1===n.some(function(t){return e(r,t)})&&n.push(r)}),e=void 0,new f(n)},f.prototype.where=function(e){var n=[];return this.source.forEach(function(t,r){return e(t,r)&&n.push(t)}),new f(n)},f.prototype.zip=function(t,r){f._check(t);for(var e=[],n=0;n<this.source.length;n++){var o=this.source[n],u=t.length>n?t[n]:void 0;e.push(r(o,u,n))}return new f(e)};var e=f;function f(t){f._check(t),this.source=t}r(i,u=e);var u,c=i;function i(t){var r=u.call(this,t.source)||this;return r.key=t.key,r}r(p,s=e),p.prototype.average=function(){return this.source.length?this.sum()/this.source.length:0},p.prototype.elementAtOrDefault=function(t){return this.source.length>t?this.source[t]:0},p.prototype.firstOrDefault=function(t){return 0<this.source.length?this.source[0]:0},p.prototype.lastOrDefault=function(t){return this.source.length?this.source[this.source.length-1]:0},p.prototype.max=function(){return this.source.length?this.source.sort(function(t,r){return r-t})[0]:0},p.prototype.min=function(){return this.source.length?this.source.sort(function(t,r){return t-r})[0]:0},p.prototype.sum=function(){return this.source.length?this.source.reduce(function(t,r){return t+r}):0};var s,h=p;function p(){return null!==s&&s.apply(this,arguments)||this}r(l,a=e),l.prototype.thenBy=function(t,r,e){return this.__thenBy(t,!1,r,e)},l.prototype.thenByDescending=function(t,r,e){return this.__thenBy(t,!0,r,e)},l.prototype.__thenBy=function(t,e,n,o){o=o||function(t,r){return t===r};var u=[];return this.groupedSource.forEach(function(r){(e?r.orderByDescending(t,n,o):r.orderBy(t,n,o)).groupedSource.forEach(function(t){return u.push(new c({key:r.key+":"+t.key,source:t.source}))})}),new l(u)};var a,y=l;function l(t){var r=a.call(this,e.new(t).selectMany(function(t){return t.source}).toArray())||this;return r.groupedSource=t,r}t.Enumerable=e,t.GroupedEnumerable=c,t.NumberEnumerable=h,t.OrderedEnumerable=y});