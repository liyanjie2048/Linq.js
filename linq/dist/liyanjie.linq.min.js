!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(((t="undefined"!=typeof globalThis?globalThis:t||self).liyanjie=t.liyanjie||{},t.liyanjie.linq={}))}(this,function(t){"use strict";var n=function(t,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])})(t,r)};function o(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=t}n(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}function u(t,r,e){if(e||2===arguments.length)for(var n,o=0,u=r.length;o<u;o++)!n&&o in r||(n||(n=Array.prototype.slice.call(r,0,o)),n[o]=r[o]);return t.concat(n||Array.prototype.slice.call(r))}"function"==typeof SuppressedError&&SuppressedError;var i=function(){function y(t){y._check(t),this.source=t}return y._check=function(t){if(!t||!Array.isArray(t))throw new Error("Array parameter can not be null or undefined!")},y.new=function(t){return new y(t||[])},y.from=function(t){return new y(t||[])},y.prototype.all=function(t){return this.every(t)},y.prototype.every=function(t){return!0===this.source.every(t)},y.prototype.any=function(t){return this.some(t)},y.prototype.some=function(t){return t?!0===this.source.some(t):0<this.source.length},y.prototype.append=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return y._check(r),(t=this.source).push.apply(t,r),this},y.prototype.average=function(t){return this.sum(t)/this.source.length},y.prototype.concat=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return y._check(r),new y((t=this.source).concat.apply(t,r))},y.prototype.contains=function(r,e){return e?!0===this.source.some(function(t){return e(t,r)}):-1<this.source.indexOf(r)},y.prototype.count=function(t){return t?this.source.filter(t).length:this.source.length},y.prototype.defaultIfEmpty=function(t){return this.isEmpty()?new y(t?[t]:[]):this},y.prototype.distinct=function(e){e=e||function(t,r){return t===r};var t=[];return this.source.forEach(function(r){return!1===t.some(function(t){return e(t,r)})&&t.push(r)}),new y(t)},y.prototype.elementAtOrDefault=function(t){return this.source.length>t?this.source[t]:void 0},y.empty=function(){return new y([])},y.prototype.except=function(t,e){y._check(t),e=e||function(t,r){return t===r};var n=[];return this.source.forEach(function(r){return!1===t.some(function(t){return e(t,r)})&&n.push(r)}),new y(n)},y.prototype.firstOrDefault=function(t){var r=t?this.source.filter(t):this.source;return 0<r.length?r[0]:void 0},y.prototype.forEach=function(t){this.source.forEach(t)},y.prototype.groupBy=function(n,o){o=o||function(t,r){return t===r};var u=[];return this.source.forEach(function(t){var r=n(t),e=u.filter(function(t){return o(t.key,r)});0<e.length?e[0].source.push(t):u.push(new c({key:r,source:[t]}))}),new y(u)},y.prototype.groupJoin=function(u,i,c,s,h){y._check(u),h=h||function(t,r){return t===r};for(var f=[],t=function(t){var r=p.source[t],e=i(r),n=u.filter(function(t){return h(e,c(t))}),o=s(r,n,e);o&&f.push(o)},p=this,r=0;r<this.source.length;r++)t(r);return new y(f)},y.prototype.intersect=function(t,e){y._check(t),e=e||function(t,r){return t===r};var n=[];return this.source.forEach(function(r){return!0===t.some(function(t){return e(t,r)})&&n.push(r)}),new y(n)},y.prototype.isEmpty=function(){return 0===this.source.length},y.prototype.join=function(i,c,s,h,f){y._check(i),f=f||function(t,r){return t===r};for(var p=[],t=function(t){var r=a.source[t],e=c(r),n=i.filter(function(t){return f(e,s(t))}),o=0<n.length?n[0]:void 0,u=h(r,o,e);u&&p.push(u)},a=this,r=0;r<this.source.length;r++)t(r);return new y(p)},y.prototype.lastOrDefault=function(t){return t?this.source.filter(t):this.source,0<this.source.length?this.source[this.source.length-1]:void 0},y.prototype.max=function(e){return 0===this.source.length?0:e(this.source.sort(function(t,r){return e(r)-e(t)})[0])},y.prototype.min=function(e){return 0===this.source.length?0:e(this.source.sort(function(t,r){return e(t)-e(r)})[0])},y.prototype.orderBy=function(t,r,e){return this.__orderBy(t,!1,r,e)},y.prototype.orderByDescending=function(t,r,e){return this.__orderBy(t,!0,r,e)},y.prototype.__orderBy=function(n,t,r,o){o=o||function(t,r){return t===r};var u=[],i=[];this.source.forEach(function(t){var r=n(t);u.indexOf(r)<0&&u.push(r);var e=i.filter(function(t){return o(t.key,r)});0<e.length?e[0].source.push(t):i.push({key:r,source:[t]})}),u=r?u.sort(r):u.sort(),t&&(u=u.reverse());var e=[];return u.forEach(function(r){return e.push(new c(i.filter(function(t){return o(r,t.key)})[0]))}),new h(e)},y.prototype.prepend=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return y._check(t),this.source=new(Array.bind.apply(Array,u(u([void 0],t,!1),this.source,!1))),this},y.range=function(t,r){for(var e=[],n=0;n<r;n++)e.push(t+n);return new s(e)},y.repeat=function(t,r){for(var e=[],n=0;n<r;n++)e.push(t);return new y(e)},y.prototype.reverse=function(){return new y((new(Array.bind.apply(Array,u([void 0],this.source,!1)))).reverse())},y.prototype.select=function(n){var o=[];return this.source.forEach(function(t,r){var e=n(t,r);e&&o.push(e)}),new y(o)},y.prototype.selectMany=function(n){var o=[];return this.source.forEach(function(t,r){var e=n(t,r);e&&o.push.apply(o,e)}),new y(o)},y.prototype.sequenceEqual=function(t,r){if(y._check(t),this.source.length!==t.length)return!1;r=r||function(t,r){return t===r};for(var e=!0,n=0;n<this.source.length;n++){if(!r(this.source[n],t.length>n?t[n]:void 0)){e=!1;break}}return r=void 0,e},y.prototype.skip=function(e){var n=[];return this.source.forEach(function(t,r){return e<=r&&n.push(t)}),new y(n)},y.prototype.skipWhile=function(e){for(var n=[],t=!1,r=0;r<this.source.length;r++){var o=this.source[r];if(e(o,r)){if(t)break}else!t&&(t=!0),n.push(o)}return this.source.forEach(function(t,r){return!e(t,r)&&n.push(t)}),new y(n)},y.prototype.sum=function(r){if(0===this.source.length)return 0;var e=0;return this.source.forEach(function(t){return e+=r(t)}),e},y.prototype.take=function(e){var n=[];return this.source.forEach(function(t,r){return r<e&&n.push(t)}),new y(n)},y.prototype.takeWhile=function(t){for(var r=[],e=!1,n=0;n<this.source.length;n++){var o=this.source[n];if(t(o,n))!e&&(e=!0),r.push(o);else if(e)break}return new y(r)},y.prototype.toArray=function(){return this.source},y.prototype.toDictionary=function(e,n){var o={};return this.source.forEach(function(t){var r=e(t);!o[r]&&(o[r]=n(t))}),o},y.prototype.toString=function(r,e){null==r&&(r=","),e=e||function(t){return t.toString()};var n="";return this.source.forEach(function(t){return n+=e(t)+r}),n.substring(0,n.length-r.length)},y.prototype.union=function(t,e){y._check(t),e=e||function(t,r){return t===r};var n=new(Array.bind.apply(Array,u([void 0],this.source,!1)));return t.forEach(function(r){return!1===n.some(function(t){return e(r,t)})&&n.push(r)}),e=void 0,new y(n)},y.prototype.where=function(e){var n=[];return this.source.forEach(function(t,r){return e(t,r)&&n.push(t)}),new y(n)},y.prototype.zip=function(t,r){y._check(t);for(var e=[],n=0;n<this.source.length;n++){var o=this.source[n],u=t.length>n?t[n]:void 0;e.push(r(o,u,n))}return new y(e)},y}(),c=function(e){function t(t){var r=e.call(this,t.source)||this;return r.key=t.key,r}return o(t,e),t}(i),s=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return o(r,t),r.prototype.average=function(){return this.source.length?this.sum()/this.source.length:0},r.prototype.elementAtOrDefault=function(t){return this.source.length>t?this.source[t]:0},r.prototype.firstOrDefault=function(t){return 0<this.source.length?this.source[0]:0},r.prototype.lastOrDefault=function(t){return this.source.length?this.source[this.source.length-1]:0},r.prototype.max=function(){return this.source.length?this.source.sort(function(t,r){return r-t})[0]:0},r.prototype.min=function(){return this.source.length?this.source.sort(function(t,r){return t-r})[0]:0},r.prototype.sum=function(){return this.source.length?this.source.reduce(function(t,r){return t+r}):0},r}(i),h=function(e){function r(t){var r=e.call(this,i.new(t).selectMany(function(t){return t.source}).toArray())||this;return r.groupedSource=t,r}return o(r,e),r.prototype.thenBy=function(t,r,e){return this.__thenBy(t,!1,r,e)},r.prototype.thenByDescending=function(t,r,e){return this.__thenBy(t,!0,r,e)},r.prototype.__thenBy=function(t,e,n,o){o=o||function(t,r){return t===r};var u=[];return this.groupedSource.forEach(function(r){(e?r.orderByDescending(t,n,o):r.orderBy(t,n,o)).groupedSource.forEach(function(t){return u.push(new c({key:r.key+":"+t.key,source:t.source}))})}),new r(u)},r}(i);t.Enumerable=i,t.GroupedEnumerable=c,t.NumberEnumerable=s,t.OrderedEnumerable=h});